{"mappings":"YACA,IAAMA,EAAQ,CACVC,aAAe,WACfC,SAAW,QCwFf,SAASC,EAAiBC,EAAKC,GAC7B,IAAIC,EAEFA,EADEF,EAAIG,OACGH,EACNI,KACC,SAAAC,G,IAAGC,EAAED,EAAFC,GAAIC,EAAIF,EAAJE,KAAMC,EAAKH,EAALG,MAAOC,EAAQJ,EAARI,S,MAClB,kDAEuBC,OADcJ,EAAG,uCAGmBI,OAFpCH,EAAK,qHAIDG,OAFgCD,EAAS,mEAExBC,OAAjBF,EAAQC,EAAS,sI,IAO/CE,KAAK,IAEE,iLAMZV,EAAKW,UAAYV,C,CCnHnB,IAIaW,EAJPC,EAAOC,SAASC,cAAc,YAC9BC,EAAeF,SAASC,cAAc,aACtCE,EAAYH,SAASC,cAAc,WAEnCG,EAAwD,QAAjDN,EAAAO,KAAKC,MAAMC,aAAaC,QAAQ3B,EAAOE,kBAAU,IAAjDe,IAAqD,GAgDlE,SAASW,IACP,IAAMC,EAAaN,EAAKO,QAAO,SAACC,EAAOC,GACrC,OAAOD,EAAQC,EAAQpB,MAAQoB,EAAQnB,Q,GACtC,GACHQ,EAAaY,YAAc,UAAqBnB,OAAXe,EAAW,Q,CAnDlD1B,EAAiBoB,EAAML,GACvBU,IAEAV,EAAKgB,iBAAiB,SAItB,SAAuBC,GAErB,GADAA,EAAMC,iBACFD,EAAME,OAAOC,UAAUC,SAAS,aAAc,CAChD,IAAM7B,EAASyB,EAAME,OAAOG,QAAQ,YAAYC,QAAxC/B,GACFgC,EAAYC,OAAOjC,GAEnBkC,EAAQrB,EAAKsB,WAAU,SAAAC,G,OAAQA,EAAKpC,KAAOgC,C,KAEnC,IAAVE,IACFrB,EAAKwB,OAAOH,EAAO,GAEnBlB,aAAasB,QAAQhD,EAAOE,SAAUsB,KAAKyB,UAAU1B,IAErDpB,EAAiBoB,EAAML,GACvBU,I,KAjBNV,EAAKgB,iBAAiB,SAsBtB,SAA0BC,GACxB,GAAIA,EAAME,OAAOC,UAAUC,SAAS,eAAgB,CAClD,IAAM7B,EAASyB,EAAME,OAAOG,QAAQ,YAAYC,QAAxC/B,GACFgC,EAAYC,OAAOjC,GACnBwC,EAAe3B,EAAKsB,WAAU,SAAAC,G,OAAQA,EAAKpC,KAAOgC,C,IAExD,IAAqB,IAAjBQ,EAAqB,CACvB,IAAMC,EAAcC,SAASjB,EAAME,OAAOgB,OAC1C9B,EAAK2B,GAAcrC,SAAWsC,EAC9B,IAAMG,EAAoBnB,EAAME,OAC7BG,QAAQ,YACRpB,cAAc,aACXS,EAAasB,EAAc5B,EAAK2B,GAActC,MACpD0C,EAAkBrB,YAAc,UAAqBnB,OAAXe,EAAW,SAElDH,aAAUsB,QAAQhD,EAAOE,SAAUsB,KAAKyB,UAAU1B,IACrDK,G,MArCNN,EAAUY,iBAAiB,SAiD3B,SAAuBC,GACrBA,EAAMC,iBACNb,EAAKhB,OAAS,EACdmB,aAAasB,QAAQhD,EAAOE,SAAUsB,KAAKyB,UAAU1B,IACrDpB,EAAiBoB,EAAML,GACvBU,G","sources":["src/common.js","src/helpers/createMarkup.js","src/cart.js"],"sourcesContent":["\nconst common ={\n    KEY_FAVORITE : 'favorite',\n    KEY_CART : 'cart',\n}\n\n\nexport {common}","function createMarkup(arr, list) {\n  let markup;\n  if (arr.length) {\n    markup = arr\n      .map(\n        ({ id, img, name, price }) =>\n          `\n  <li class=\"list-item js-card\" data-id=\"${id}\">\n  <img class=\"list-img\" src=\"${img}\" alt=\"${name}\" />\n  <h2 class=\"list-title\">${name}</h2>\n  <p class=\"list-link\">\n  <a href=\"#\" class=\"js-info\">More info</a>\n  </p>\n  <p >${price} грн.</p>\n  <div class=\"list-btn\">\n  <button class=\"js-favorite\">Add to favorite</button>\n  <button class=\"js-cart\">Add to cart</button>\n  </div>\n  </li>\n  `\n      )\n      .join('');\n  } else {\n    markup = `<li >\n      <img class=\"list-img\" src=\"https://im.indiatimes.in/media/content/2017/Dec/quickmeme_1514290406_725x725.jpg\" alt=\"404\" style=\"width: 400px; height: auto;\"/>\n      </li>`;\n  }\n  list.innerHTML = markup;\n}\n\nfunction createFavoriteMarkup(arr, list) {\n  let markup;\n  if (arr.length) {\n    markup = arr\n      .map(\n        ({ id, img, name, price }) =>\n          `\n    <li class=\"list-item js-card\" data-id=\"${id}\">\n    <img class=\"list-img\" src=\"${img}\" alt=\"${name}\" />\n    <h2 class=\"list-title\">${name}</h2>\n    <p class=\"list-link\">\n    <a href=\"#\" class=\"js-info\">More info</a>\n    </p>\n    <p>price: ${price} грн.</p>\n    <div class=\"list-btn\">\n    <button class=\"js-delete\">Delete</button>\n    <button class=\"js-cart\">Add to cart</button>\n    </div>\n    </li>\n    `\n      )\n      .join('');\n  } else {\n    markup = `<li >\n        <img class=\"list-img\" src=\"https://i.ytimg.com/vi/0epmoPKTP3g/maxresdefault.jpg\" alt=\"404\" style=\"width: 500px; height: auto;\"/>\n        </li>`;\n  }\n  list.innerHTML = markup;\n}\n\n// function createCartMarkup(arr, list) {\n//   let markup;\n//   if (arr.length) {\n//     markup = arr\n//       .map(\n//         ({ id, name, price, quantity }) =>\n//           `\n//       <li class=\"list-item js-card\" data-id=\"${id}\">\n\n//       <h2 class=\"list-title\">${name}</h2>\n//       <div class=\"quantity-square\">\n//       <input type=\"number\" class=\"quantity js-quantity \" value=\"${quantity}\" min=\"1\">\n//     </div>\n\n//       <p class=\"js-total\">price: ${price * quantity} грн.</p>\n//       <div class=\"list-btn\">\n//       <button class=\"js-delete\">Delete</button>\n//       <button class=\"js-cart\">Buy now</button>\n//       </div>\n//       </li>\n\n//       `\n//       )\n//       .join('');\n//   } else {\n//     markup = `<li >\n//           <img class=\"list-img\" src=\"https://www.gmuprinthub.com/content/images/empty-cart.png\" alt=\"404\" style=\"width: 500px; height: auto;\"/>\n//           </li>`;\n//   }\n//   list.innerHTML = markup;\n// }\nfunction createCartMarkup(arr, list) {\n  let markup;\n  if (arr.length) {\n    markup = arr\n      .map(\n        ({ id, name, price, quantity }) =>\n          `\n      <li class=\"list-item js-card\" data-id=\"${id}\">\n        <h2 class=\"list-title\">${name}</h2>\n        <div class=\"quantity-square\">\n          <input type=\"number\" class=\"quantity js-quantity\" value=\"${quantity}\" min=\"1\">\n        </div>\n        <p class=\"js-total\">price: ${price * quantity} грн.</p>\n        <div class=\"list-btn\">\n          <button class=\"js-delete\">Delete</button>\n        </div>\n      </li>\n      `\n      )\n      .join('');\n  } else {\n    markup = `\n      <li>\n        <img class=\"list-img\" src=\"https://www.gmuprinthub.com/content/images/empty-cart.png\" alt=\"404\" style=\"width: 500px; height: auto;\"/>\n      </li>\n    `;\n  }\n  list.innerHTML = markup;\n}\n\nexport { createMarkup, createFavoriteMarkup, createCartMarkup };\n","import { common } from './common';\nimport { createCartMarkup } from './helpers/createMarkup';\n\nconst list = document.querySelector('.js-list');\nconst totalElement = document.querySelector('.js-total');\nconst buyButton = document.querySelector('.js-buy');\n\nconst cart = JSON.parse(localStorage.getItem(common.KEY_CART)) ?? [];\ncreateCartMarkup(cart, list);\nupdateTotalPrice();\n\nlist.addEventListener('click', onDeleteClick);\nlist.addEventListener('input', onQuantityChange);\nbuyButton.addEventListener('click', onBuyNowClick);\n\nfunction onDeleteClick(event) {\n  event.preventDefault();\n  if (event.target.classList.contains('js-delete')) {\n    const { id } = event.target.closest('.js-card').dataset;\n    const productId = Number(id);\n\n    const index = cart.findIndex(item => item.id === productId);\n\n    if (index !== -1) {\n      cart.splice(index, 1);\n\n      localStorage.setItem(common.KEY_CART, JSON.stringify(cart));\n\n      createCartMarkup(cart, list);\n      updateTotalPrice();\n    }\n  }\n}\n\nfunction onQuantityChange(event) {\n  if (event.target.classList.contains('js-quantity')) {\n    const { id } = event.target.closest('.js-card').dataset;\n    const productId = Number(id);\n    const productIndex = cart.findIndex(item => item.id === productId);\n\n    if (productIndex !== -1) {\n      const newQuantity = parseInt(event.target.value);\n      cart[productIndex].quantity = newQuantity;\n      const totalPriceElement = event.target\n        .closest('.js-card')\n        .querySelector('.js-total');\n      const totalPrice = newQuantity * cart[productIndex].price;\n      totalPriceElement.textContent = `price: ${totalPrice} грн.`;\n\n      localStorage.setItem(common.KEY_CART, JSON.stringify(cart));\n      updateTotalPrice();\n    }\n  }\n}\n\nfunction updateTotalPrice() {\n  const totalPrice = cart.reduce((total, product) => {\n    return total + product.price * product.quantity;\n  }, 0);\n  totalElement.textContent = `Total: ${totalPrice} грн.`;\n}\n\nfunction onBuyNowClick(event) {\n  event.preventDefault();\n  cart.length = 0;\n  localStorage.setItem(common.KEY_CART, JSON.stringify(cart));\n  createCartMarkup(cart, list);\n  updateTotalPrice();\n}\n"],"names":["$553dc769982d198b$export$919daad019702595","KEY_FAVORITE","KEY_CART","$f4df2ac45960cbd0$export$af42f604a5c132a9","arr","list","markup","length","map","param","id","name","price","quantity","concat","join","innerHTML","$81a7916dcdcfa57d$var$ref","$81a7916dcdcfa57d$var$list","document","querySelector","$81a7916dcdcfa57d$var$totalElement","$81a7916dcdcfa57d$var$buyButton","$81a7916dcdcfa57d$var$cart","JSON","parse","localStorage","getItem","$81a7916dcdcfa57d$var$updateTotalPrice","totalPrice","reduce","total","product","textContent","addEventListener","event","preventDefault","target","classList","contains","closest","dataset","productId","Number","index","findIndex","item","splice","setItem","stringify","productIndex","newQuantity","parseInt","value","totalPriceElement"],"version":3,"file":"cart.9094f576.js.map"}